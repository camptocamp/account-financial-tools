<?xml version="1.0" encoding="UTF-8"?>
<odoo>

  <record id="view_purchase_order_filter_add" model="ir.ui.view">
    <field name="name">request.quotation.select</field>
    <field name="model">purchase.order</field>
    <field name="inherit_id" ref="purchase.view_purchase_order_filter"/>
    <field name="arch" type="xml">
      <xpath expr="//filter[@name='to_approve']" position="after">
        <filter
          name="my_rfq"
          string="My RFQ"
          domain="['&amp;',('create_uid', '=', uid), ('state','in',('draft','sent','bid','cancel', 'confirmed'))]"/>
        <filter
          name="my_purchases"
          string="My Purchases"
          domain="['&amp;',('create_uid', '=', uid), ('state','in',('purchase','done'))]"/>
      </xpath>
    </field>
  </record>

  <!-- Top menu item -->
  <menuitem name="Purchases"
      id="purchase.menu_purchase_root"
      groups="base.group_user"
      web_icon="purchase,static/description/icon.png"
      sequence="25"/>

  <record id="purchase_order_form_employee" model="ir.ui.view">
    <field name="name">request.quotation.select.override</field>
    <field name="model">purchase.order</field>
    <field name="inherit_id" ref="purchase.purchase_order_form"/>
    <field name="arch" type="xml">
      <xpath expr="//header" position="replace">
        <header>
          <button
            name="action_rfq_send"
            states="draft" string="Send RFQ by Email"
            type="object" context="{'send_rfq':True}"
            class="oe_highlight"
            groups="base.group_user"/>
          <button
            name="action_rfq_send"
            states="sent"
            string="Re-Send RFQ by Email"
            type="object" context="{'send_rfq':True}"
            groups="base.group_user"/>
          <button
            name="print_quotation"
            string="Print RFQ"
            type="object"
            states="draft"
            class="oe_highlight"
            groups="base.group_user"/>
          <button
            name="print_quotation"
            string="Print RFQ"
            type="object"
            states="sent"
            groups="base.group_user"/>
          <button
            name="button_confirm"
            type="object"
            states="draft"
            string="Confirm Order"
            id="draft_confirm"
            groups="purchase.group_purchase_user"/>
          <button
            name="button_confirm"
            type="object"
            states="sent"
            string="Confirm Order"
            class="oe_highlight"
            id="bid_confirm"
            groups="purchase.group_purchase_user"/>
          <button
            name="button_approve"
            type="object"
            states='to approve'
            string="Approve Order"
            class="oe_highlight"
            groups="purchase.group_purchase_manager"/>
          <button
            name="action_rfq_send"
            states="purchase"
            string="Send PO by Email"
            type="object"
            context="{'send_rfq':False}"/>
          <button
            name="action_view_picking"
            string="Receive Products"
            class="oe_highlight"
            type="object"
            attrs="{'invisible': ['|', '|' , ('is_shipped', '=', True), ('state','not in', ('purchase','done')), ('picking_count', '=', 0)]}"/>
          <button
            name="button_draft"
            states="cancel"
            string="Set to Draft"
            type="object"
            groups="purchase.group_purchase_user"/>
          <button
            name="button_cancel"
            states="draft,to approve,sent,purchase"
            string="Cancel"
            type="object"
            groups="purchase.group_purchase_user"/>
          <button
            name="button_done"
            type="object" string="Lock"
            states="purchase"
            groups="purchase.group_purchase_user"/>
          <button
            name="button_unlock"
            type="object"
            string="Unlock"
            states="done"
            groups="purchase.group_purchase_manager"/>
          <field
            name="state"
            widget="statusbar"
            statusbar_visible="draft,sent,purchase"
            readonly="1"/>
        </header>
      </xpath>
    </field>
  </record>

</odoo>
